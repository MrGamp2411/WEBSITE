{% extends "layout.html" %}
{% block content %}
<h1>{{ bar.name }} Orders</h1>
<div class="orders-controls">
  <a class="btn" href="/dashboard/bar/{{ bar.id }}/orders/history">Order History &amp; Revenue</a>
  <form method="post" action="/dashboard/bar/{{ bar.id }}/orders/close" style="display:inline">
    <button type="submit" class="btn">Close Day</button>
  </form>
</div>
<div id="orders-section">
  <h2>Incoming Orders</h2>
  <ul id="incoming-orders" class="order-list"></ul>
  <h2>Preparing</h2>
  <ul id="preparing-orders" class="order-list"></ul>
  <h2>Ready</h2>
  <ul id="ready-orders" class="order-list"></ul>
  <h2>Completed</h2>
  <ul id="completed-orders" class="order-list"></ul>
</div>
<script src="/static/js/orders.js" defer></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    // start bartender WebSocket listener for live orders
    initBartender({{ bar.id }});
  });
</script>
{% endblock %}
