<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="theme-color" content="#ffffff">
  <meta name="color-scheme" content="light dark">
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <title>SiplyGo Prototype</title>
  <meta name="description" content="SiplyGo helps you discover bars nearby and manage your orders effortlessly.">
  <link rel="canonical" href="https://siplygo.example.com/">
  <meta property="og:title" content="SiplyGo Prototype">
  <meta property="og:description" content="Discover bars nearby and manage orders with SiplyGo.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://siplygo.example.com/">
  <meta property="og:image" content="/static/favicon.png">
  <meta name="twitter:card" content="summary_large_image">
  <link rel="icon" href="/static/favicon.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="/static/css/tokens.css" rel="stylesheet">
  <link href="/static/css/base.css" rel="stylesheet">
  <link href="/static/css/components.css" rel="stylesheet">
  <link href="/static/css/utilities.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
</head>
<body data-cart-bar-id="{{ cart_bar_id or '' }}" data-current-bar-id="{{ current_bar_id or '' }}">
  <div class="site-bg" aria-hidden="true"></div>
  <header class="site-header" role="banner">
      <div class="mobile-header">
        <!-- Premium hamburger trigger -->
        <button class="nav-toggle js-open-menu" aria-label="Menu" aria-controls="mobileMenu" aria-expanded="false">
          <i class="bi bi-list" aria-hidden="true"></i>
        </button>
        <a class="hdr-logo" href="/">SiplyGo</a>
        <div class="hdr-actions">
          {% if user %}
          <a class="credit-pill" href="/wallet" aria-label="Credits">CHF {{ "%.2f"|format(user.credit) }}</a>
          {% endif %}
          <a class="cart-icon" href="/cart" aria-label="Cart">
            <i class="bi bi-cart2" aria-hidden="true"></i>
            <span class="cart-badge" aria-live="polite">{% if cart_count %}{{ cart_count }}{% else %}0{% endif %}</span>
          </a>
        </div>
      </div>
      <nav aria-label="Primary" class="navbar desktop-nav">
        <button class="nav-toggle js-open-menu" aria-label="Menu" aria-controls="mobileMenu" aria-expanded="false">
          <i class="bi bi-list" aria-hidden="true"></i>
        </button>
        <a class="hdr-logo" href="/">SiplyGo</a>
        <div class="hdr-actions">
          {% if user %}
          <a class="credit-pill desktop-credit" href="/wallet" aria-label="Credits">CHF {{ "%.2f"|format(user.credit) }}</a>
          {% endif %}
          <a class="cart-icon" href="/cart" aria-label="Cart ({% if cart_count %}{{ cart_count }}{% else %}0{% endif %} items)">
            <i class="bi bi-cart2" aria-hidden="true"></i>
            <span class="cart-badge" aria-live="polite">{% if cart_count %}{{ cart_count }}{% else %}0{% endif %}</span>
          </a>
        </div>
      </nav>
      <nav id="mobileMenu" class="mobile-menu" aria-label="Menu" role="dialog" aria-modal="true" hidden>
        <button class="menu-close js-close-menu" aria-label="Close menu"><i class="bi bi-x" aria-hidden="true"></i></button>
        <a href="/search" role="menuitem"><i class="bi bi-geo-alt" aria-hidden="true"></i><span>Browse Bars</span></a>
        <a href="#how" role="menuitem"><i class="bi bi-stars" aria-hidden="true"></i><span>How it works</span></a>
        {% if user and (user.is_super_admin or user.is_bar_admin or user.is_bartender) %}
        <a href="/dashboard" role="menuitem"><i class="bi bi-speedometer2" aria-hidden="true"></i><span>Dashboard</span></a>
        {% endif %}
        {% if user %}
        <a href="/wallet" role="menuitem"><i class="bi bi-wallet2" aria-hidden="true"></i><span>Wallet</span></a>
        <a href="/orders" role="menuitem"><i class="bi bi-clock-history" aria-hidden="true"></i><span>Orders</span></a>
        <a href="/logout" role="menuitem"><i class="bi bi-box-arrow-right" aria-hidden="true"></i><span>Logout</span></a>
        {% else %}
        <a href="/login" role="menuitem" class="menu-login"><i class="bi bi-box-arrow-in-right" aria-hidden="true"></i><span>Login</span></a>
        <a href="/register" role="menuitem" class="menu-register"><i class="bi bi-person-plus" aria-hidden="true"></i><span>Register</span></a>
        {% endif %}
      </nav>
    <div class="menu-backdrop" hidden></div>
  </header>
  <div class="hdr-sub">
    <button class="location-pill location-selector js-open-location" aria-label="Change location"><span id="locationDisplay">📍 Detecting location...</span></button>
    <a class="btn-icon" href="/search" aria-label="Search"><i class="bi bi-search"></i></a>
  </div>
  <input type="search" id="locationInput" class="visually-hidden" value="Detecting location..." placeholder="Enter city or ZIP" aria-label="Current location" list="citySuggestionsMobile" autocomplete="postal-code">
  <datalist id="citySuggestionsMobile">
    <option value="Lugano"></option>
    <option value="Locarno"></option>
    <option value="Zurich"></option>
  </datalist>
  <div class="search-overlay" hidden>
    <button class="overlay-close" aria-label="Close">×</button>
    <div class="overlay-body">
      <input type="search" id="barSearch" placeholder="Search bars..." aria-label="Search bars" inputmode="search" autocomplete="off" enterkeyhint="search">
      <div id="searchSuggestions" class="search-suggestions"></div>
    </div>
  </div>
  <main id="main" class="container">
      {% block content %}{% endblock %}
  </main>
  <footer class="site-footer" role="contentinfo">
    <div class="container">
      <p>SiplyGo © 2025 · <a href="#">About</a> · <a href="#">Help Center</a> · <a href="#">For Bars</a> · <a href="#">Legal</a></p>
    </div>
  </footer>
  <div id="cartBlocker" class="cart-blocker" {% if cart_bar_id and current_bar_id != cart_bar_id and not cart_bar_paused %}{% else %}hidden{% endif %}>
    <div class="cart-popup">
      <p>You still have products in your cart at <strong>{{ cart_bar_name }}</strong>.</p>
      <div class="cart-popup-actions">
        <button type="button" class="btn btn--secondary js-clear-cart">Remove products</button>
        <a class="btn btn--primary" href="/bars/{{ cart_bar_id }}">Go to the bar menu</a>
      </div>
    </div>
  </div>
  <div id="servicePaused" class="cart-blocker" hidden>
    <div class="cart-popup">
      <p>Ordering is paused for <strong>{{ cart_bar_name }}</strong>. Please contact a staff member for more information.</p>
      <div class="cart-popup-actions">
        {% if pause_popup_close|default(False) %}
        <button type="button" class="btn btn--secondary js-close-service-paused">Close</button>
        {% endif %}
        {% if pause_popup_back|default(False) %}
        <a class="btn btn--primary" href="/bars/{{ cart_bar_id }}">Back to the menu</a>
        {% endif %}
      </div>
    </div>
  </div>
  <script>
    window.orderingPaused = {{ 'true' if cart_bar_paused else 'false' }};
    window.showServicePausedOnLoad = {{ 'true' if show_service_paused|default(False) else 'false' }};
  </script>
  <script src="/static/js/app.min.js" defer></script>
  {% block scripts %}{% endblock %}
</body>
</html>

