{% extends "layout.html" %}
{% block page_styles %}
{{ super() }}
<link rel="stylesheet" href="/static/css/pages/register-step1.css">
{% endblock %}
{% block content %}
<div class="auth-card">
  <h1>{{ _('register_step1.title', default='Register') }}</h1>
  {% if error %}<p class="alert">{{ error }}</p>{% endif %}
  <form method="post" action="/register">
    <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
    <label for="email">{{ _('register_step1.fields.email.label', default='Email') }}
      <input id="email" type="email" name="email" required autocomplete="email" inputmode="email" enterkeyhint="next" pattern="[^@]+@[^@]+\.[^@]+" title="{{ _('register_step1.fields.email.title', default='Email must be in the format text@text.text') }}" value="{{ email|default('') }}">
    </label>
    <label for="password">{{ _('register_step1.fields.password.label', default='Password') }}
      <div class="password-wrapper">
        <input id="password" type="password" name="password" required autocomplete="new-password" enterkeyhint="next" minlength="8" maxlength="128" title="{{ _('register_step1.fields.password.title', default='Password must be between 8 and 128 characters') }}">
        <button type="button" class="toggle-password" aria-label="{{ _('auth.password_toggle.show', default='Show password') }}" data-show-label="{{ _('auth.password_toggle.show', default='Show password') }}" data-hide-label="{{ _('auth.password_toggle.hide', default='Hide password') }}"><i class="bi bi-eye"></i></button>
      </div>
      <span id="capsWarning" class="caps-warning" hidden>{{ _('auth.caps_warning', default='Caps Lock is on') }}</span>
    </label>
    <label for="confirm_password">{{ _('register_step1.fields.confirm_password.label', default='Confirm Password') }}
      <div class="password-wrapper">
        <input id="confirm_password" type="password" name="confirm_password" required autocomplete="new-password" enterkeyhint="done" minlength="8" maxlength="128" title="{{ _('auth.password_mismatch', default='Passwords must match') }}" data-mismatch-message="{{ _('auth.password_mismatch', default='Passwords must match') }}">
        <button type="button" class="toggle-password" aria-label="{{ _('auth.password_toggle.show', default='Show password') }}" data-show-label="{{ _('auth.password_toggle.show', default='Show password') }}" data-hide-label="{{ _('auth.password_toggle.hide', default='Hide password') }}"><i class="bi bi-eye"></i></button>
      </div>
      <span id="capsWarningConfirm" class="caps-warning" hidden>{{ _('auth.caps_warning', default='Caps Lock is on') }}</span>
    </label>
    <p class="auth-card__disclaimer">{{ _('register_step1.disclaimer', default="By registering you accept our <a href=\"/terms\">Terms of Service</a>.")|safe }}</p>
    <button class="btn btn--primary" type="submit">{{ _('register_step1.actions.submit', default='Next') }}</button>
  </form>
  <p class="auth-card__login-prompt">{{ _('register_step1.actions.login_prompt', default="Already registered? <a href=\"/login\">Log in</a>")|safe }}</p>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/password.js" defer></script>
{% endblock %}
