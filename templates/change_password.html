{% extends "layout.html" %}
{% block content %}
<section class="profile-page change-password-page">
  <div class="profile-card">
    <div class="profile-head">
      <h1 class="profile-title">Change Password</h1>
      <p class="profile-subtitle">Update your account password.</p>
    </div>
    {% if error %}<p class="alert">{{ error }}</p>{% endif %}
    <form method="post" action="/profile/password" class="profile-form">
      <div class="form-grid">
        <div class="field" data-name="current-password">
          <label for="current_password" class="block-label">Current Password</label>
          <div class="password-wrapper input-with-icon">
            <input id="current_password" type="password" name="current_password" autocomplete="current-password" enterkeyhint="next" minlength="8" maxlength="128" title="Password must be between 8 and 128 characters">
            <button type="button" class="toggle-password icon" aria-label="Show password"><i class="bi bi-eye"></i></button>
          </div>
          <span id="capsWarningCurrent" class="caps-warning" hidden>Caps Lock is on</span>
        </div>
        <div class="field" data-name="new-password">
          <label for="password" class="block-label">New Password</label>
          <div class="password-wrapper input-with-icon">
            <input id="password" type="password" name="password" autocomplete="new-password" enterkeyhint="next" minlength="8" maxlength="128" title="Password must be between 8 and 128 characters">
            <button type="button" class="toggle-password icon" aria-label="Show password"><i class="bi bi-eye"></i></button>
          </div>
          <span id="capsWarning" class="caps-warning" hidden>Caps Lock is on</span>
          <small class="help">Use 8+ characters with letters &amp; numbers.</small>
        </div>
        <div class="field" data-name="confirm-password">
          <label for="confirm_password" class="block-label">Confirm Password</label>
          <div class="password-wrapper input-with-icon">
            <input id="confirm_password" type="password" name="confirm_password" autocomplete="new-password" enterkeyhint="done" minlength="8" maxlength="128" title="Passwords must match">
            <button type="button" class="toggle-password icon" aria-label="Show password"><i class="bi bi-eye"></i></button>
          </div>
          <span id="capsWarningConfirm" class="caps-warning" hidden>Caps Lock is on</span>
        </div>
      </div>
      <div class="sticky-actions">
        <button class="btn btn--primary" type="submit">Save</button>
      </div>
    </form>
  </div>
</section>
{% endblock %}
{% block scripts %}
<script src="/static/js/password.js" defer></script>
{% endblock %}
