{% extends "layout.html" %}
{% block content %}
<h1>{{ bar.name }}</h1>
<p>{{ bar.address }}, {{ bar.city }}, {{ bar.state }}</p>
{% for category, products in products_by_category.items() %}
  <section class="category">
    <h2>{{ category.name }}</h2>
    <p>{{ category.description }}</p>
    <ul class="products">
      {% for product in products %}
      <li>
        <article class="card">
          <div class="card__body">
            <h3 class="card__title">{{ product.name }}</h3>
            <p>{{ product.description }}</p>
            <p><strong>CHF {{ product.price }}</strong></p>
            {% if user %}
            <form class="form form--inline" method="get" action="/bars/{{ bar.id }}/add_to_cart">
              <input type="hidden" name="product_id" value="{{ product.id }}">
              <button class="btn btn--primary btn--small" type="submit">Add to Cart</button>
            </form>
            {% else %}
            <a class="btn" href="/login">Login to order</a>
            {% endif %}
          </div>
        </article>
      </li>
      {% endfor %}
    </ul>
  </section>
{% endfor %}
{% endblock %}
