{% extends "layout.html" %}
{% block content %}
<h1>Manage Users</h1>
<div class="dashboard-info">
  <div class="card">
    <h2>{{ user.username }}</h2>
    <p>{{ user.email }}</p>
    <p>{{ user.prefix }} {{ user.phone }}</p>
  </div>
</div>
<table class="table">
  <thead>
    <tr><th>Username</th><th>Email</th><th>Phone</th><th>Role</th><th>Bar</th><th>Credit</th><th></th></tr>
  </thead>
  <tbody>
    {% for u in users %}
    <tr>
      <td>{{ u.username }}</td>
      <td>{{ u.email }}</td>
      <td>{{ u.prefix }} {{ u.phone }}</td>
      <td>{{ u.role }}</td>
      <td>
        {% if u.bar_ids %}
          {% for bid in u.bar_ids %}
            {{ bars[bid].name }}{% if not loop.last %}, {% endif %}
          {% endfor %}
        {% else %}-{% endif %}
      </td>
      <td>CHF {{ "%.2f"|format(u.credit) }}</td>
      <td><a href="/admin/users/edit/{{ u.id }}">Edit</a></td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
