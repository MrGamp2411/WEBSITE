# AGENT Notes

- `static/css/components.css` (and its minified counterpart) contains styles for cards and bars.
- Desktop bar card width and height are fixed at `400px` and `450px`.
- Desktop bar card height was reduced by 50px.
- Mobile card styles remain at `width:300px` and `height:400px` via media queries.
- Bar card markup resides in `templates/home.html` and `templates/search.html`, while related behavior lives in `static/js/app.js` and `static/js/search.js`.
- Carousel arrow controls compute width from the first *visible* card; hiding the first item can break navigation if not accounted for.
- A "View All" list of bars is available at `/bars`, rendered with `templates/all_bars.html` and enhanced by `static/js/view-all.js`.
- On the `/bars` page, card widths are reduced by `50px` (to `350px` desktop and `250px` mobile) via `.bars.all-bars .bar-card` overrides in `components.css`.
- Cards on the `/bars` page are centered within their grid cells via `.bars.all-bars{justify-items:center;}`.
- `/bars` now includes search inputs and filter controls (name, city, max distance, min rating, open/closed, categories) wired up in `static/js/view-all.js` and styled via `.bar-filters` in `components.css`.
- `/bars` filter toolbar uses a grid layout with icon-labeled inputs, range slider, star rating selector, and active filter chips (markup in `templates/all_bars.html`, logic in `static/js/view-all.js`, styles in `components.css`).
- The filter controls sit inside a responsive `.bar-filters` card that uses `auto-fit` grid columns to size itself to both screen width and filter content.
- Filters on `/bars` are hidden by default; the `#filters-toggle` button toggles the `#filters-panel`, rotates its chevron, updates the label between "Mostra filtri" and "Nascondi filtri", and shows a badge with the count of active filters (markup in `templates/all_bars.html`, logic in `static/js/view-all.js`, styles in `static/css/components.css`).
- `#filters-toggle.btn-filter` uses SiplyGo gradient-glass styling with a sliders icon, animated count badge, and chevron (see `components.css` & `static/js/view-all.js`).
- `.bar-filters[hidden]{display:none;}` in `static/css/components.css` keeps the panel hidden until it's toggled.
- Category chip group spans the full filter width via `.bar-filters .filter-group.categories` to keep chips inline until space runs out (see `templates/all_bars.html` and `static/css/components.css`).
- Bars support a `bar_categories` field (comma-separated) with 30 predefined types (see `BAR_CATEGORIES` in `main.py`).
- Admin forms `templates/admin_new_bar.html` and `templates/admin_edit_bar.html` offer multiselect inputs for these categories.
- Category filter chips on `/bars` and search overlays draw from this predefined list in `static/js/view-all.js` and `static/js/search.js`.
- Admin bar category selection is limited to five choices, enforced in both the form UI and server-side handlers.
- Startup ensures the `bars` table includes a `bar_categories` column and `load_bars_from_db()` populates each bar's categories from that comma-separated field.
- Core app routes reside in `main.py`, with models in `models.py` and database helpers in `database.py`.
- A reusable `.cta-pill` component with primary and ghost variants is defined in `static/css/components.css` (minified in `static/css/components.min.css`) and powers the "Vedi tutti" link in `templates/search.html`; loading state handled in `static/js/search.js`.
- The "Vedi tutti" button uses the `.cta-pill` styles without any hover or active animations, and `static/js/search.js` no longer swaps its arrow icon for a spinner.
